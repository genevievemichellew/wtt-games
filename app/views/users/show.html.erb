
<div class="container-profile">
  <div class="d-flex">
    <div class="user-profile px-2 ">
      <%# <%= cl_image_tag user.picture.key, height: 150, width: 150, crop: :fill %>
      <p class="my-4">Name: <%= @user.first_name %> <%= @user.last_name %></p>
      <p class="mb-4">E-mail: <%= @user.email %></p>
      <% if @user.photo.key %>
      <div class="rounded-circle d-flex justify-content-center">
        <%= cl_image_tag @user.photo.key, height: 100, width: 100, crop: :fill %>
      </div>
      <% else %>
      <div class="rounded-circle">
      </div>
      <% end %>
      <div class="m-4 d-flex justify-content-center">
        <a href="<%= edit_user_registration_path %>" class="btn btn-outline-success">Edit profile</a>
      </div>
      <p class="d-flex justify-content-center"><%= link_to "Back to main page", games_path %></p>
      <div class="m-4 d-flex justify-content-center">
        <%= button_to "Log out", destroy_user_session_path, method: :delete, form: {turbolink: false}, class:"btn btn-outline-warning"%>
      </div>
    </div>

    <div class="grid border border-dark p-3">
      <% if @rents == [] %>
        <p>You didn't rent any games</p>
      <% else %>
        <p>Games that you've rented:</p>
        <% @rents.each do |rent| %>
          <div class="card-rents-request d-flex flex-column">
            <%= cl_image_tag rent.game.picture.key, height: 150, width: 150, crop: :fill %>
            <p>from: <%= rent.start_date %></p>
            <p> to: <%= rent.end_date %></p>
            <p>Status: <%= rent.status %></p>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="grid border border-dark p-3">
      <% if @received_rents == [] %>
        <p>Nobody rented games from you at the moment</p>
      <% else %>
        <p>Games other people rented from you:</p>
        <% @received_rents.each do |rent| %>
          <div class="card-rents-request">
            <div class="card-info-img">
            <%= cl_image_tag rent.game.picture.key, height: 150, width: 150,crop: :fill %>
            </div>
            <p>from: <%= rent.start_date %></p>
            <p> to: <%= rent.end_date %></p>
            <p>Status: <%= rent.status %></p>
            <p><%= button_to "Confirm this rent", rent_path(rent, {status: 'confirmed'}), class:"btn btn-outline-success", method: :patch if rent.status == 'pending' %></p>
            <p><%= button_to "Reject this rent", rent_path(rent, {status: 'canceled'}), class:"btn btn-outline-warning", method: :patch if rent.status == 'pending' %></p>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="m-4">
      <h2>My Games</h2>
      <div class="cards-profile">
        <% if @user.games == [] %>
          <p>You have no games</p>
        <% else %>
          <% @user.games.each do |game| %>
            <div>
              <%= link_to game_path(game), class:"card-profile" do %>
                <%= cl_image_tag game.picture.key, height: 150, width: 150, crop: :fill %>
              <% end %>
              <p><%= game.name %></p>
            </div>
          <% end %>
        <% end %>
        <p><%= link_to "Add a new game", new_game_path %></p>
      </div>
      <h2>My rented games</h2>
      <div class="cards-profile">
        <% if @user.games == [] %>
          <p>You have no games</p>
        <% else %>
          <% @user.games.each do |game| %>
            <div>
              <%= link_to game_path(game), class:"card-profile" do %>
                <%= cl_image_tag game.picture.key, height: 150, width: 150, crop: :fill %>
              <% end %>
              <p><%= game.name %></p>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
